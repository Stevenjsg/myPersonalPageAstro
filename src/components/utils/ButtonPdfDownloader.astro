---
const {
  targetId = "cv-content",
  fileName = "CV_StevenSilva.pdf",
  children,
} = Astro.props;
const btnId = `download-pdf-btn-${targetId}`;
---

<button
  id={btnId}
  class="px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 transition"
  onclick={`(
    function(){
      const element = document.getElementById('${targetId}');
      if (!element) return;
      const opt = {
        margin: 0,
        filename: '${fileName}',
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { scale: 2, useCORS: true },
        jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
      };
      html2pdf().set(opt).from(element).save();
    }
  )()`}
>
  {children ?? "Descargar PDF"}
</button>

<!-- Asegúrate de incluir html2pdf.js SOLO una vez en toda la app, preferentemente en el layout global o aquí si usas pocas páginas -->
<script
  src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"
></script>
